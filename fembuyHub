local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Fembuy Hub",
   Icon = 93059603763570,
   LoadingTitle = "Loading Hub",
   LoadingSubtitle = "by Manuel",
   Theme = "Default",
   ToggleUIKeybind = "K",
   ConfigurationSaving = {
      Enabled = true,
      FileName = "Fembuy Hub"
   },
   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },
   KeySystem = true,
   KeySettings = {
      Title = "Fembuy Hub",
      Subtitle = "Enter the key to proceed",
      Note = "Ask Manuel",
      FileName = "Key",
      SaveKey = true,
      Key = {"ilovefemboys"}
   }
})

Rayfield:Notify({
   Title = "Successful Execution",
   Content = "Fembuy Hub has loaded correctly.",
   Duration = 6.5,
   Image = 4483362458,
})

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local toggles = {
   InfYield = false,
   Invis = false,
   Phantasm = false,
   TSBExtra = false,
   Garden = false,
   ESPEnabled = false
}

-- Function: Highlight (ESP) all players
local function highlightPlayers()
   for _, player in pairs(Players:GetPlayers()) do
      if player ~= localPlayer and player.Character then
         if not player.Character:FindFirstChild("ESPBox") then
            local highlight = Instance.new("Highlight")
            highlight.Name = "ESPBox"
            highlight.FillColor = Color3.fromRGB(255, 0, 255)
            highlight.FillTransparency = 0.6
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            highlight.OutlineTransparency = 0
            highlight.Adornee = player.Character
            highlight.Parent = player.Character
         end
      end
   end
end

-- Function: Kill all players (local damage, serverside better)
local function killAllPlayers()
   for _, player in pairs(Players:GetPlayers()) do
      if player ~= localPlayer and player.Character and player.Character:FindFirstChild("Humanoid") then
         player.Character.Humanoid:TakeDamage(9999)
      end
   end
end

-- Function: Teleport all players to you (once)
local function teleportAllToMe()
   local root = localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart")
   if not root then
      Rayfield:Notify({
         Title = "Error",
         Content = "Your character or HumanoidRootPart not found!",
         Duration = 5
      })
      return
   end

   for _, player in pairs(Players:GetPlayers()) do
      if player ~= localPlayer and player.Character then
         local humRoot = player.Character:FindFirstChild("HumanoidRootPart")
         if humRoot then
            humRoot.CFrame = root.CFrame + Vector3.new(0, 5, 0) -- teleport slightly above to avoid clipping
         end
      end
   end

   Rayfield:Notify({
      Title = "Teleport Complete",
      Content = "All players have been teleported to you.",
      Duration = 5
   })
end

-- Better player size scaling using Humanoid.Scale values (to avoid collapse)
local function setPlayerSize(scale)
   if not localPlayer.Character then return end
   local humanoid = localPlayer.Character:FindFirstChildOfClass("Humanoid")
   if humanoid and humanoid:FindFirstChild("BodyHeightScale") and humanoid:FindFirstChild("BodyWidthScale") and humanoid:FindFirstChild("BodyDepthScale") and humanoid:FindFirstChild("HeadScale") then
      humanoid.BodyHeightScale.Value = scale
      humanoid.BodyWidthScale.Value = scale
      humanoid.BodyDepthScale.Value = scale
      humanoid.HeadScale.Value = scale
   else
      Rayfield:Notify({
         Title = "Warning",
         Content = "Humanoid scale values not found; size change may cause glitches.",
         Duration = 5
      })
      -- fallback: scaling parts, but can cause issues
      for _, part in pairs(localPlayer.Character:GetChildren()) do
         if part:IsA("BasePart") then
            part.Size = part.Size * scale
         end
      end
   end
end

-- HOME TAB
local HomeTab = Window:CreateTab("Home", 17205450457)

HomeTab:CreateButton({
   Name = "Infinite Yield",
   Callback = function()
      if not toggles.InfYield then
         toggles.InfYield = true
         getgenv().infYield = loadstring(game:HttpGet("https://cdn.wearedevs.net/scripts/Infinite%20Yield.txt"))()
      else
         Rayfield:Notify({
            Title = "Already Loaded",
            Content = "Rejoin to disable Infinite Yield.",
            Duration = 4
         })
      end
   end,
})

-- PLAYER TAB
local PlayerTab = Window:CreateTab("Player", 17205450457)

PlayerTab:CreateButton({
   Name = "Invisible Script",
   Callback = function()
      if not toggles.Invis then
         toggles.Invis = true
         loadstring(game:HttpGet('https://pastebin.com/raw/3Rnd9rHf'))()
      end
   end,
})

-- Player size input box (no limit, safer scaling)
PlayerTab:CreateInput({
   Name = "Player Size Multiplier",
   PlaceholderText = "Type any positive number (e.g. 1.5)",
   RemoveTextAfterFocusLost = false,
   Callback = function(text)
       local sizeNum = tonumber(text)
       if sizeNum and sizeNum > 0 then
           setPlayerSize(sizeNum)
           Rayfield:Notify({
               Title = "Size Updated",
               Content = "Player size set to "..sizeNum.."x",
               Duration = 4
           })
       else
           Rayfield:Notify({
               Title = "Invalid Input",
               Content = "Enter a positive number!",
               Duration = 4
           })
       end
   end
})

-- Teleport everyone button
PlayerTab:CreateButton({
   Name = "Teleport Everyone To Me",
   Callback = function()
       teleportAllToMe()
   end,
})

-- TSB TAB
local TSBTab = Window:CreateTab("TSB", 17205450457)

TSBTab:CreateButton({
   Name = "Phantasm Hub",
   Callback = function()
      if not toggles.Phantasm then
         toggles.Phantasm = true
         loadstring(game:HttpGet("https://raw.githubusercontent.com/ATrainz/Phantasm/main/Games/TSB.lua"))()
      end
   end,
})

TSBTab:CreateButton({
   Name = "Extra TSB Script",
   Callback = function()
      if not toggles.TSBExtra then
         toggles.TSBExtra = true
         loadstring(game:HttpGet("https://raw.githubusercontent.com/ATrainz/Phantasm/main/Games/TSB.lua"))()
      end
   end,
})

TSBTab:CreateButton({
   Name = "Highlight All Players",
   Callback = function()
      highlightPlayers()
      Rayfield:Notify({
         Title = "ESP Enabled",
         Content = "All players now highlighted.",
         Duration = 4
      })
   end,
})

-- GARDEN TAB
local GardenTab = Window:CreateTab("Grow a Garden", 17205450457)

GardenTab:CreateButton({
   Name = "Garden Script",
   Callback = function()
      if not toggles.Garden then
         toggles.Garden = true
         loadstring(game:HttpGet("https://raw.githubusercontent.com/tesghg/Grow-a-Garden/main/ameicaa_Grow_A_Garden.lua"))()
      end
   end,
})

-- TROLL TAB
local TrollTab = Window:CreateTab("Troll", 17205450457)

TrollTab:CreateButton({
   Name = "Teleport Everyone To Me",
   Callback = function()
      teleportAllToMe()
   end,
})

TrollTab:CreateButton({
   Name = "Kill All Players",
   Callback = function()
      killAllPlayers()
      Rayfield:Notify({
         Title = "Attack Complete",
         Content = "Tried to kill all players!",
         Duration = 5
      })
   end,
})
